{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://www.krakend.io/schema/backend/amqp/producer.json",
    "title": "AMQP Producer",
    "description": "Send messages to a queue through the API Gateway.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
    "type": "object",
    "additionalProperties": false,
    "patternProperties": {
        "^[@$_#]": {}
    },
    "required": [
        "name",
        "exchange",
        "routing_key"
    ],
    "properties": {
        "name": {
            "$id": "#backend/amqp/consumer/name",
            "title": "Name",
            "description": "Queue name.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string"
        },
        "exchange": {
            "$id": "#backend/amqp/consumer/exchange",
            "title": "Exchange",
            "description": "The exchange name (must have a topic type if already exists).\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "examples": [
                "some-exchange"
            ]
        },
        "routing_key": {
            "$id": "#backend/amqp/consumer/routing_key",
            "title": "Routing key",
            "description": "The routing key you will use to send messages, case sensitive.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "default": "#"
        },
        "exp_key": {
            "$id": "#backend/amqp/consumer/exp_key",
            "title": "Expiration key",
            "description": "Take a parameter from a `{placeholder}` in the endpoint definition to use as the expiration key. The key must have the first letter uppercased. For instance, when an endpoint parameter is defined as `{id}`, you must write `Id`.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "default": ""
        },
        "reply_to_key": {
            "$id": "#backend/amqp/consumer/reply_to_key",
            "title": "Expiration key",
            "description": "Take a parameter from a `{placeholder}` in the endpoint definition to use as the reply key. The key must have the first letter uppercased. For instance, when an endpoint parameter is defined as `{id}`, you must write `Id`.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "default": ""
        },
        "msg_id_key": {
            "$id": "#backend/amqp/consumer/msg_id_key",
            "title": "Expiration key",
            "description": "Take a parameter from a `{placeholder}` in the endpoint definition to use as the message identifier. The key must have the first letter uppercased. For instance, when an endpoint parameter is defined as `{id}`, you must write `Id`.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "default": ""
        },
        "priority_key": {
            "$id": "#backend/amqp/consumer/priority_key",
            "title": "Expiration key",
            "description": "Take a parameter from a `{placeholder}` in the endpoint definition to use as the reply key. The key must have the first letter uppercased. For instance, when an endpoint parameter is defined as `{id}`, you must write `Id`.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "default": ""
        },
        "durable": {
            "$id": "#backend/amqp/consumer/durable",
            "title": "Durable",
            "description": "true is recommended, but depends on the use case. Durable queues will survive server restarts and remain when there are no remaining consumers or bindings.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "boolean",
            "default": false
        },
        "delete": {
            "$id": "#backend/amqp/consumer/delete",
            "title": "Delete",
            "description": "false is recommended to avoid deletions when the consumer is disconnected.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "boolean",
            "default": false
        },
        "no_wait": {
            "$id": "#backend/amqp/consumer/no_wait",
            "title": "No wait",
            "description": "When true, do not wait for the server to confirm the request and immediately begin deliveries. If it is not possible to consume, a channel exception will be raised and the channel will be closed.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "boolean"
        },
        "no_local": {
            "$id": "#backend/amqp/consumer/no_local",
            "title": "No local",
            "description": "The no_local flag is not supported by RabbitMQ.\n\nSee: https://www.krakend.io/docs/backends/amqp-consumer/",
            "type": "boolean"
        },
        "mandatory": {
            "$id": "#backend_extra_config/backend/amqp/producer/mandatory",
            "title": "Mandatory",
            "description": "The exchange must have at least one queue bound when true.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "boolean",
            "default": false
        },
        "immediate": {
            "$id": "#backend_extra_config/backend/amqp/producer/immediate",
            "title": "Immediate",
            "description": "A consumer must be connected to the queue when true.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "boolean",
            "default": false
        },
        "max_retries": {
            "title": "Max retries",
            "description": "The maximum number of times you will allow KrakenD to retry reconnecting to a broken messaging system. During startup KrakenD will wait for a maximum of 3 retries before starting to use this policy. Use 0 for unlimited retries.\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "integer",
            "default": 0
        },
        "backoff_strategy": {
            "title": "Backoff strategy",
            "description": "When the connection to your event source gets interrupted for whatever reason, KrakenD keeps trying to reconnect until it succeeds or until it reaches the `max_retries`. The backoff strategy defines the delay in seconds in between consecutive failed retries. [Check the meaning of each strategy](https://www.krakend.io/docs/async/#backoff-strategies).\n\nSee: https://www.krakend.io/docs/backends/amqp-producer/",
            "type": "string",
            "enum": [
                "linear",
                "linear-jitter",
                "exponential",
                "exponential-jitter",
                "fallback"
            ],
            "default": "fallback"
        }
    }
}