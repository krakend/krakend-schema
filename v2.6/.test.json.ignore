{
    "$schema": "./krakend.json",
    "@comment": "This configuration is not valid from a functionality point of view, it's only used to test the schema.",
    "_comment": "Attribute not in schema, but ignored as it starts with _",
    "$comment": "Attribute not in schema, but ignored as it starts with $",
    "#comment": "Attribute not in schema, but ignored as it starts with #",
    "version": 3,
    "name": "KrakenD configuration at MyCompany",
    "port": 8080,
    "host": [
        "http://localhost:8080"
    ],
    "sequential_start": false,
    "timeout": "2s",
    "output_encoding": "fast-json",
    "read_timeout": "10s",
    "write_timeout": "10s",
    "dialer_timeout": "10s",
    "dialer_keep_alive": "15s",
    "dialer_fallback_delay": "300ms",
    "disable_compression": false,
    "disable_keep_alives": true,
    "max_idle_connections": 0,
    "max_idle_connections_per_host": 2,
    "idle_connection_timeout": "10s",
    "response_header_timeout": "10s",
    "expect_continue_timeout": "0s",
    "disable_rest": true,
    "cache_ttl": "300s",
    "idle_timeout": "10s",
    "read_header_timeout": "10s",
    "client_tls": {
        "allow_insecure_connections": false,
        "cipher_suites": [
            4865,
            4866,
            4867
        ],
        "ca_certs": [
            "ca.pem"
        ],
        "curve_preferences": [
            23,
            24,
            25
        ],
        "disable_system_ca_pool": false,
        "max_version": "TLS13",
        "min_version": "TLS12",
        "client_certs": [
            {
                "certificate": "bart.crt",
                "private_key": "bart.key"
            }
        ]
    },
    "tls": {
        "public_key": "./cert.pem",
        "private_key": "./certs/key.pem",
        "disabled": true,
        "min_version": "TLS12",
        "max_version": "SSL3.0",
        "enable_mtls": false,
        "curve_preferences": [
            23,
            24,
            25
        ],
        "cipher_suites": [
            4865
        ],
        "disable_system_ca_pool": false,
        "ca_certs": [
            "ca.pem"
        ]
    },
    "plugin": {
        "folder": "/opt/krakend/plugins/",
        "pattern": ".so"
    },
    "async_agent": [
        {
            "name": "cool-agent",
            "connection": {
                "max_retries": 10,
                "backoff_strategy": "exponential-jitter",
                "health_interval": "10s"
            },
            "consumer": {
                "topic": "*",
                "workers": 1,
                "timeout": "150ms",
                "max_rate": 0.5
            },
            "encoding": "json",
            "backend": [
                {
                    "host": [
                        "http://127.0.0.1:8080"
                    ],
                    "input_headers": [
                        "Accept"
                    ],
                    "url_pattern": "/__debug/",
                    "extra_config": {
                        "auth/ntlm": {
                            "user": "user",
                            "password": "pass"
                        },
                        "auth/gcp": {
                            "audience": "https://gcptest-76fewi6rca-uc.a.run.app",
                            "credentials_file": "/etc/krakend/gcp.json",
                            "custom_claims": {
                                "a": 1
                            }
                        },
                        "backend/http": {
                            "return_error_code": true,
                            "@extra_comment": "here"
                        },
                        "backend/soap": {
                            "path": "./path/to.xml",
                            "content_type": "application/xml",
                            "debug": false
                        },
                        "modifier/body-generator": {
                            "content_type": "application/json",
                            "debug": false,
                            "template": "abcdef"
                        },
                        "modifier/response-body-generator": {
                            "content_type": "application/json",
                            "debug": false,
                            "template": "abcdef"
                        }
                    }
                }
            ],
            "extra_config": {
                "async/amqp": {
                    "name": "krakend",
                    "host": "amqp://guest:guest@localhost:5672/",
                    "exchange": "foo",
                    "durable": true,
                    "delete": false,
                    "exclusive": false,
                    "no_wait": true,
                    "prefetch_count": 5,
                    "auto_ack": false,
                    "no_local": true
                }
            }
        }
    ],
    "endpoints": [
        {
            "@comment": "Feature: GRPC",
            "endpoint": "/flights",
            "input_query_strings": [
                "*"
            ],
            "backend": [
                {
                    "host": [
                        "localhost:4242"
                    ],
                    "disable_host_sanitize": true,
                    "url_pattern": "/flight_finder.Flights/FindFlight",
                    "extra_config": {
                        "backend/static-filesystem": {
                            "path": "./static/"
                        },
                        "backend/grpc": {
                            "client_tls": {
                                "@comment": "Allow untrusted certificates in development stage",
                                "allow_insecure_connections": true
                            },
                            "input_mapping": {
                                "lat": "where.latitude",
                                "lon": "where.longitude"
                            },
                            "header_mapping": {
                                "X-Tenant": "haha"
                            },
                            "output_duration_as_string": false,
                            "output_enum_as_string": false,
                            "output_timestamp_as_string": false,
                            "response_naming_convention": "snake_case"
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/fhir/unrestful${translate}",
            "backend": [
                {
                    "url_pattern": "/user/{translate}"
                }
            ]
        },
        {
            "endpoint": "/ws/{room}",
            "input_query_strings": [
                "*"
            ],
            "input_headers": [
                "*"
            ],
            "backend": [
                {
                    "extra_config": {
                        "security/policies": {
                            "resp": {
                                "policies": [],
                                "error": {
                                    "body": "",
                                    "content_type": "text/plain",
                                    "status": 500
                                }
                            },
                            "auto_join_policies": false,
                            "debug": false,
                            "disable_macros": false,
                            "req": {
                                "error": {
                                    "body": ""
                                },
                                "policies": []
                            }
                        },
                        "telemetry/opentelemetry": {
                            "proxy": {
                                "disable_metrics": true,
                                "disable_traces": true
                            },
                            "backend": {
                                "metrics": {
                                    "disable_stage": true
                                },
                                "traces": {
                                    "disable_stage": true
                                }
                            }
                        }
                    },
                    "url_pattern": "/ws",
                    "disable_host_sanitize": true,
                    "host": [
                        "ws://localhost:8081"
                    ]
                }
            ],
            "extra_config": {
                "telemetry/opentelemetry": {
                    "proxy": {
                        "disable_metrics": false,
                        "disable_traces": false
                    },
                    "exporters_override": {
                        "metric_reporting_period": 10,
                        "trace_sample_rate": 1,
                        "metric_exporters": ["local_prometheus"],
                        "trace_exporters": ["debug_jaeger", "newrelic", "local_tempo" ]
                    }
                },
                "security/policies": {
                    "jwt": {
                        "policies": [
                            "has(JWT.user_id)"
                        ]
                    },
                    "req": {
                        "policies": [],
                        "error": {
                            "body": "",
                            "content_type": "text/plain",
                            "status": 500
                        }
                    },
                    "resp": {
                        "policies": [],
                        "error": {
                            "body": "",
                            "content_type": "text/plain",
                            "status": 500
                        }
                    }
                },
                "auth/basic": {
                    "@comment": "Override",
                    "htpasswd_path": "/path/to/.htpasswd",
                    "users": {
                        "admin": "$2y$05$HpdPmv2Z3h3skMCVaf/CEep/UUBuhZ...",
                        "user2": "$2y$05$HpdPmv2Z3h3skMCVaf/CEep/UUBuhZ..."
                    }
                },
                "plugin/req-resp-modifier": {
                    "content-replacer": {
                        "key.a": {
                            "find": "",
                            "regexp": false,
                            "replace": ""
                        }
                    }
                },
                "websocket": {
                    "input_headers": [
                        "Cookie",
                        "Authorization"
                    ],
                    "connect_event": true,
                    "disconnect_event": true,
                    "read_buffer_size": 4096,
                    "write_buffer_size": 4096,
                    "message_buffer_size": 4096,
                    "max_message_size": 3200000,
                    "write_wait": "10s",
                    "pong_wait": "60s",
                    "ping_period": "54s",
                    "max_retries": 0,
                    "backoff_strategy": "exponential"
                },
                "modifier/response-body-generator": {
                    "content_type": "application/json",
                    "debug": false,
                    "template": "abcdef"
                }
            }
        },
        {
            "@endpoint_comment": "here",
            "endpoint": "/cel/req-resp/{id}",
            "input_headers": [
                "X-Header"
            ],
            "backend": [
                {
                    "@backend_comment": "here",
                    "host": [
                        "http://127.0.0.1:8080"
                    ],
                    "url_pattern": "/__debug/1/{id}",
                    "group": "backend1",
                    "extra_config": {
                        "validation/cel": [
                            {
                                "@cel_comment": "here",
                                "check_expr": "int(req_params.Id) % 3 == 0"
                            }
                        ],
                        "modifier/jmespath": {
                            "expr": "students[?age > `18` ].name"
                        }
                    }
                },
                {
                    "host": [
                        "http://127.0.0.1:8080"
                    ],
                    "url_pattern": "/__debug/2/{id}",
                    "group": "backend2",
                    "extra_config": {
                        "validation/cel": [
                            {
                                "check_expr": "int(req_params.Id) % 5 == 0"
                            }
                        ]
                    }
                }
            ],
            "extra_config": {
                "auth/validator": {
                    "@comment": "The validator can match 2 different schemas, with local path and with jwk_url",
                    "jwk_local_path": "./jwk.txt",
                    "alg": "EdDSA",
                    "leeway": "1s"
                },
                "auth/api-keys": {
                    "@comment": "here",
                    "identifier": "x-some-key",
                    "strategy": "header",
                    "roles": [
                        "admin"
                    ],
                    "client_max_rate": 0.3
                },
                "documentation/openapi": {
                    "description": "Very long description of what this endpoint does",
                    "query_definition": [
                        {
                            "name": "page",
                            "description": "The number of the page"
                        }
                    ],
                    "summary": "Get my favourite foo",
                    "tags": [
                        "foo",
                        "bar",
                        "baz"
                    ],
                    "audience": [
                        "gold",
                        "silver"
                    ],
                    "example": {
                        "response": "ok"
                    },
                    "response_definition": {
                        "404": {
                            "@comment": "Some comment",
                            "description": "Page not found",
                            "example_schema": "eyJhbGxPZiI6W3sicHJvcGVydGllcyI6eyJ2ZXJzaW9uIjp7InR5cGUiOiJzdHJpbmcifX0sInJlcXVpcmVkIjpbInZlcnNpb24iXSwidHlwZSI6Im9iamVjdCJ9LHsicHJvcGVydGllcyI6eyJkaXJlY3RvcnkiOnsiYWxsT2YiOlt7InByb3BlcnRpZXMiOnsibWV0YWRhdGEiOnsidHlwZSI6Im9iamVjdCIsIngtZ28tdHlwZSI6IkRpcmVjdG9yeU1ldGFkYXRhIn0sIm5hbWUiOnsidHlwZSI6InN0cmluZyIsIngtb2FwaS1jb2RlZ2VuLWV4dHJhLXRhZ3MiOnsiYmluZGluZyI6InJlcXVpcmVkIn19fSwicmVxdWlyZWQiOlsibmFtZSJdLCJ0eXBlIjoib2JqZWN0In0seyJwcm9wZXJ0aWVzIjp7ImNyZWF0ZWRBdCI6eyJmb3JtYXQiOiJkYXRlLXRpbWUiLCJ0eXBlIjoic3RyaW5nIn0sImRlbGV0ZWRBdCI6eyJmb3JtYXQiOiJkYXRlLXRpbWUiLCJ0eXBlIjoic3RyaW5nIn0sImlkIjp7InR5cGUiOiJzdHJpbmciLCJ4LWdvLXR5cGUiOiJEaXJlY3RvcnlJRCJ9LCJwYXJlbnQiOnsib3B0aW9uYWwiOnRydWUsInR5cGUiOiJzdHJpbmciLCJ4LWdvLXR5cGUiOiJEaXJlY3RvcnlJRCJ9LCJ1cGRhdGVkQXQiOnsiZm9ybWF0IjoiZGF0ZS10aW1lIiwidHlwZSI6InN0cmluZyJ9fSwicmVxdWlyZWQiOlsiaWQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiXSwidHlwZSI6Im9iamVjdCJ9XX19LCJyZXF1aXJlZCI6WyJkaXJlY3RvcnkiXSwidHlwZSI6Im9iamVjdCJ9XX0=",
                            "content_type": "application/json",
                            "example": {
                                "foo": "bar"
                            }
                        }
                    },
                    "request_definition": {
                        "@comment": "Some comment",
                        "description": "Page not found",
                        "example": {
                            "status": "KO"
                        },
                        "content_type": "application/json"
                    }
                },
                "validation/cel": [
                    {
                        "@cel_comment": "here",
                        "check_expr": "'something' in req_headers['X-Header']"
                    },
                    {
                        "check_expr": "int(req_params.Id) % 2 == 0"
                    }
                ],
                "modifier/jmespath": {
                    "expr": "students[?age > `18` ].name"
                }
            }
        },
        {
            "endpoint": "/foo/{var}",
            "method": "GET",
            "output_encoding": "json-collection",
            "input_query_strings": [
                "*"
            ],
            "input_headers": [
                "User-Agent"
            ],
            "concurrent_calls": 4,
            "timeout": "1500ms",
            "cache_ttl": "300s",
            "backend": [
                {
                    "url_pattern": "/foo/{var}",
                    "encoding": "json",
                    "sd": "static",
                    "sd_scheme": "http",
                    "method": "GET",
                    "disable_host_sanitize": false,
                    "host": [
                        "http://some_host"
                    ],
                    "target": "data",
                    "deny": [
                        "a"
                    ],
                    "allow": [
                        "b"
                    ],
                    "group": "backend1",
                    "mapping": {
                        "from": "to"
                    },
                    "is_collection": true,
                    "extra_config": {
                        "plugin/req-resp-modifier": {
                            "name": [
                                "krakend-debugger"
                            ],
                            "ip-filter": {
                                "allow": false,
                                "CIDR": [
                                    "192.168.0.0/24",
                                    "172.17.2.56/32"
                                ],
                                "client_ip_headers": [
                                    "X-Forwarded-For",
                                    "X-Real-IP",
                                    "X-Appengine-Remote-Addr"
                                ],
                                "trusted_proxies": [
                                    "10.0.0.0/16"
                                ]
                            },
                            "content-replacer": {
                                "data.credit_card": {
                                    "@comment": "Ridiculous card masking. Take 4 digits and remove the rest. Credit card is inside a data object.",
                                    "find": "(^\\d{4})(.*)",
                                    "replace": "${1}-XXXX",
                                    "regexp": true
                                },
                                "message": {
                                    "@comment": "Replace '6 items left' with '6' on the message field",
                                    "find": " items left",
                                    "replace": ""
                                }
                            },
                            "response-schema-validator": {
                                "schema": {
                                    "$schema": "http://json-schema.org/draft-07/schema#",
                                    "type": "object",
                                    "properties": {
                                        "user": {
                                            "type": "object",
                                            "properties": {
                                                "username": {
                                                    "type": "string"
                                                },
                                                "user_id": {
                                                    "type": "number"
                                                },
                                                "status": {
                                                    "type": "string",
                                                    "enum": [
                                                        "registered",
                                                        "banned"
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "username",
                                                "user_id"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "user"
                                    ]
                                },
                                "error": {
                                    "body": "We couldn't process you request, try again later.",
                                    "status": 401
                                }
                            }
                        },
                        "plugin/http-client": {
                            "name": "static-filesystem",
                            "path": "/var/log/application/"
                        },
                        "backend/pubsub/publisher": {
                            "topic_url": "",
                            "@extra_comment": "here"
                        },
                        "backend/pubsub/subscriber": {
                            "subscription_url": "",
                            "@extra_comment": "here"
                        },
                        "backend/amqp/consumer": {
                            "auto_ack": false,
                            "delete": false,
                            "durable": true,
                            "exchange": "some-exchange",
                            "name": "queue1",
                            "no_local": false,
                            "no_wait": false,
                            "prefetch_count": 10,
                            "routing_key": [
                                "#"
                            ],
                            "@extra_comment": "here"
                        },
                        "backend/amqp/producer": {
                            "name": "queue-1",
                            "exchange": "some-exchange",
                            "durable": true,
                            "delete": false,
                            "no_wait": true,
                            "no_local": false,
                            "routing_key": "#",
                            "mandatory": false,
                            "immediate": false,
                            "@extra_comment": "here"
                        },
                        "backend/lambda": {
                            "endpoint": "",
                            "function_name": "",
                            "function_param_name": "",
                            "max_retries": 1,
                            "region": "",
                            "@extra_comment": "here"
                        },
                        "auth/client-credentials": {
                            "client_id": "ID1",
                            "client_secret": "mys3cr3t",
                            "endpoint_params": {
                                "audience": [
                                    "YOUR-AUDIENCE"
                                ]
                            },
                            "scopes": "scope1, scope2",
                            "token_url": "https://your.custom.identity.service.tld/token_endpoint",
                            "@extra_comment": "here"
                        },
                        "modifier/lua-backend": {
                            "allow_open_libs": true,
                            "live": true,
                            "md5": {
                                "file1.lua": "49ae50f58e35f4821ad4550e1a4d1de0"
                            },
                            "post": "print('Backend response, pre-logic:'); local r = request.load(); print(r:body());",
                            "pre": "print('Backend response, pre-logic:'); local r = request.load(); print(r:body());",
                            "skip_next": true,
                            "sources": [
                                "file1.lua"
                            ],
                            "@extra_comment": "here"
                        },
                        "modifier/martian": {
                            "header.Modifier": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "name": "X-Martian",
                                "value": "true"
                            }
                        },
                        "qos/http-cache": {
                            "shared": true,
                            "@extra_comment": "here"
                        },
                        "qos/circuit-breaker": {
                            "interval": 60,
                            "log_status_change": true,
                            "max_errors": 10,
                            "name": "cb-backend-1",
                            "timeout": 10,
                            "@extra_comment": "here"
                        },
                        "qos/ratelimit/proxy": {
                            "capacity": 1,
                            "max_rate": 1.1,
                            "every": "10m",
                            "@extra_comment": "here"
                        },
                        "proxy": {
                            "flatmap_filter": [
                                {
                                    "type": "move",
                                    "args": [
                                        "collection",
                                        "coins"
                                    ]
                                },
                                {
                                    "type": "del",
                                    "args": [
                                        "coins.*.ath_change_percentage",
                                        "coins.*.ath_date",
                                        "coins.*.atl",
                                        "coins.*.atl_change_percentage"
                                    ]
                                }
                            ],
                            "shadow": true
                        },
                        "backend/graphql": {
                            "operationName": "addMktPreferencesForUser",
                            "query_path": "./graphql/mutations/marketing.graphql",
                            "type": "mutation",
                            "variables": {
                                "user": "{user_id}",
                                "other_static_variables": {
                                    "foo": false,
                                    "bar": true
                                }
                            },
                            "@extra_comment": "here"
                        },
                        "backend/http": {
                            "return_error_details": "backend_alias",
                            "@extra_comment": "here"
                        },
                        "backend/http/client": {
                            "@comment": "Enterprise only",
                            "no_redirect": false,
                            "client_tls": {
                                "allow_insecure_connections": false,
                                "ca_certs": [
                                    "custom.pem"
                                ],
                                "disable_system_ca_pool": true,
                                "cipher_suites": [
                                    4865,
                                    4866,
                                    4867
                                ]
                            },
                            "proxy_address": "http://troloro:9099"
                        }
                    }
                }
            ],
            "extra_config": {
                "validation/json-schema": {
                    "type": "object",
                    "properties": {
                        "number": {
                            "type": "number"
                        },
                        "street_name": {
                            "type": "string"
                        }
                    },
                    "@extra_comment": "here"
                },
                "security/cors": {
                    "allow_origins": [
                        "*"
                    ],
                    "allow_methods": [
                        "GET",
                        "HEAD",
                        "POST",
                        "HEAD",
                        "OPTIONS"
                    ],
                    "expose_headers": [
                        "Content-Length",
                        "Content-Type"
                    ],
                    "max_age": "12h",
                    "allow_headers": [
                        "Accept-Language"
                    ],
                    "allow_credentials": false,
                    "debug": false,
                    "@extra_comment": "here"
                },
                "modifier/lua-endpoint": {
                    "allow_open_libs": true,
                    "live": true,
                    "md5": {
                        "file1.lua": "49ae50f58e35f4821ad4550e1a4d1de0"
                    },
                    "pre": "print('Backend response, pre-logic:'); local r = request.load(); print(r:body());",
                    "sources": [
                        "file1.lua"
                    ],
                    "@extra_comment": "here"
                },
                "modifier/lua-proxy": {
                    "pre": "print('Backend response, pre-logic:'); local r = request.load(); print(r:body());",
                    "@extra_comment": "here"
                },
                "qos/ratelimit/router": {
                    "client_max_rate": 10.2,
                    "key": "X-TOKEN",
                    "max_rate": 100.5,
                    "every": "10m",
                    "strategy": "ip",
                    "@extra_comment": "here"
                },
                "proxy": {
                    "combiner": "combiner_name",
                    "sequential": true,
                    "static": {
                        "data": {
                            "foo": 1
                        },
                        "strategy": "always",
                        "@extra_comment": "here"
                    },
                    "flatmap_filter": [
                        {
                            "type": "move",
                            "args": [
                                "collection",
                                "coins"
                            ]
                        },
                        {
                            "type": "del",
                            "args": [
                                "coins.*.ath_change_percentage",
                                "coins.*.ath_date",
                                "coins.*.atl",
                                "coins.*.atl_change_percentage"
                            ]
                        }
                    ],
                    "@extra_comment": "here"
                },
                "security/http": {
                    "allowed_hosts": [
                        "ABC"
                    ],
                    "browser_xss_filter": true,
                    "content_security_policy": "default-src 'self';",
                    "content_type_nosniff": true,
                    "custom_frame_options_value": "ALLOW-FROM https://example.com",
                    "frame_deny": true,
                    "host_proxy_headers": [
                        "X-Forwarded-Hosts"
                    ],
                    "hpkp_public_key": "pin-sha256=\"base64==\"; max-age=expireTime [; includeSubDomains][; report-uri=\"reportURI\"]",
                    "is_development": true,
                    "referrer_policy": "same-origin",
                    "ssl_host": "ssl.host.domain",
                    "ssl_proxy_headers": {
                        "X-Forwarded-Proto": "https"
                    },
                    "ssl_redirect": true,
                    "sts_include_subdomains": true,
                    "sts_seconds": 300,
                    "@extra_comment": "here"
                },
                "security/bot-detector": {
                    "allow": [
                        "MyAndroidClient/1.0"
                    ],
                    "@extra_comment": "here"
                },
                "auth/validator": {
                    "alg": "EdDSA",
                    "jwk_url": "http://KEYCLOAK:8080/auth/realms/master/protocol/openid-connect/certs",
                    "secret_url": "awskms://keyID",
                    "cypher_key": "",
                    "cache": true,
                    "cache_duration": 900,
                    "audience": [
                        "audience1"
                    ],
                    "roles_key": "resource_access.myclient.roles",
                    "roles_key_is_nested": true,
                    "roles": [
                        "r1"
                    ],
                    "scopes": [
                        "s1"
                    ],
                    "scopes_key": "sk",
                    "scopes_matcher": "all",
                    "issuer": "issuer",
                    "cookie_key": "cookie_jwt",
                    "disable_jwk_security": true,
                    "jwk_fingerprints": [],
                    "cipher_suites": [
                        49199
                    ],
                    "jwk_local_ca": "./ca",
                    "propagate_claims": [
                        [
                            "sub",
                            "x-user"
                        ]
                    ],
                    "key_identify_strategy": "kid",
                    "operation_debug": true,
                    "@extra_comment": "here"
                },
                "auth/signer": {
                    "alg": "EdDSA",
                    "cipher_suites": [
                        49199,
                        49195,
                        49200,
                        49196,
                        52392,
                        52393
                    ],
                    "disable_jwk_security": true,
                    "full": false,
                    "jwk_fingerprints": [],
                    "jwk_local_ca": "",
                    "keys_to_sign": [
                        "access_token"
                    ],
                    "kid": "sim2",
                    "cypher_key": "",
                    "jwk_local_path": "./jwk.txt",
                    "secret_url": "awskms://keyID",
                    "@extra_comment": "here"
                },
                "plugin/req-resp-modifier": {
                    "name": [
                        "krakend-debugger"
                    ]
                }
            }
        },
        {
            "endpoint": "/test/body.Modifier",
            "backend": [
                {
                    "url_pattern": "/__debug/body.Modifier",
                    "extra_config": {
                        "modifier/martian": {
                            "body.Modifier": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "@comment": "Send a {'msg':'you rock!'}",
                                "body": "eyJtc2ciOiJ5b3Ugcm9jayEifQ=="
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/cookie.Modifier",
            "input_headers": [
                "X-Some"
            ],
            "output_encoding": "no-op",
            "backend": [
                {
                    "url_pattern": "/__echo/cookie.Modifier",
                    "encoding": "no-op",
                    "extra_config": {
                        "modifier/martian": {
                            "cookie.Modifier": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "name": "AcceptCookies",
                                "value": "yes",
                                "path": "/some/path",
                                "domain": "example.com",
                                "expires": "2025-04-12T23:20:50.52Z",
                                "secure": true,
                                "httpOnly": false,
                                "maxAge": 86400
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/url.Modifier",
            "input_query_strings": [
                "currency",
                "amount"
            ],
            "backend": [
                {
                    "host": [
                        "https://does-not-exist"
                    ],
                    "url_pattern": "/neither",
                    "extra_config": {
                        "modifier/martian": {
                            "url.Modifier": {
                                "scope": [
                                    "request"
                                ],
                                "scheme": "http",
                                "host": "localhost:8080",
                                "path": "/__echo/hello",
                                "query": "flag=true"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/querystring.Modifier",
            "input_query_strings": [
                "currency",
                "amount"
            ],
            "backend": [
                {
                    "host": [
                        "http://localhost:8080"
                    ],
                    "url_pattern": "/__echo/querystring.Modifier",
                    "extra_config": {
                        "modifier/martian": {
                            "querystring.Modifier": {
                                "scope": [
                                    "request"
                                ],
                                "name": "amount",
                                "value": "75"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Copy",
            "input_headers": [
                "X-Some"
            ],
            "output_encoding": "no-op",
            "backend": [
                {
                    "host": [
                        "http://localhost:8080"
                    ],
                    "url_pattern": "/__echo/header.Copy",
                    "extra_config": {
                        "modifier/martian": {
                            "header.Copy": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "from": "User-Agent",
                                "to": "X-Browser"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Modifier",
            "output_encoding": "no-op",
            "backend": [
                {
                    "host": [
                        "http://localhost:8080"
                    ],
                    "url_pattern": "/__echo/header.Modifier",
                    "extra_config": {
                        "modifier/martian": {
                            "header.Modifier": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "name": "User-Agent",
                                "value": "Late-Night-Commander v2.3"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Id",
            "backend": [
                {
                    "url_pattern": "/__echo/header.Id",
                    "extra_config": {
                        "modifier/martian": {
                            "header.Id": {
                                "scope": [
                                    "request"
                                ]
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/stash.Modifier",
            "output_encoding": "no-op",
            "input_query_strings": [
                "amount",
                "currency"
            ],
            "backend": [
                {
                    "host": [
                        "http://localhost:8080"
                    ],
                    "url_pattern": "/__echo/stash.Modifier",
                    "extra_config": {
                        "modifier/martian": {
                            "stash.Modifier": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "headerName": "X-Stash"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Blacklist",
            "output_encoding": "no-op",
            "input_headers": [
                "X-Some"
            ],
            "backend": [
                {
                    "host": [
                        "http://localhost:8080"
                    ],
                    "url_pattern": "/__echo/header.Blacklist",
                    "extra_config": {
                        "modifier/martian": {
                            "header.Blacklist": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "names": [
                                    "X-Some",
                                    "User-Agent",
                                    "X-Forwarded-Host",
                                    "X-Forwarded-For"
                                ]
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/port.Modifier",
            "output_encoding": "no-op",
            "input_headers": [
                "X-Some"
            ],
            "backend": [
                {
                    "host": [
                        "http://localhost:1234"
                    ],
                    "url_pattern": "/__echo/port.Modifier",
                    "extra_config": {
                        "modifier/martian": {
                            "port.Modifier": {
                                "scope": [
                                    "request"
                                ],
                                "port": 8080
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/port.Filter",
            "backend": [
                {
                    "host": [
                        "http://localhost:1234"
                    ],
                    "url_pattern": "/__echo/port.Filter",
                    "extra_config": {
                        "modifier/martian": {
                            "port.Filter": {
                                "scope": [
                                    "request"
                                ],
                                "port": 1234,
                                "modifier": {
                                    "port.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "port": 8080
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Append",
            "input_headers": [
                "X-Some"
            ],
            "output_encoding": "no-op",
            "backend": [
                {
                    "url_pattern": "/__echo/header.Append",
                    "encoding": "no-op",
                    "extra_config": {
                        "modifier/martian": {
                            "header.Append": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "name": "X-Some",
                                "value": "I am"
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/cookie.Filter",
            "input_headers": [
                "Cookie"
            ],
            "backend": [
                {
                    "url_pattern": "/__echo/cookie.Filter",
                    "allow": [
                        "req_headers.Accepts-Marketing-Cookies"
                    ],
                    "extra_config": {
                        "modifier/martian": {
                            "cookie.Filter": {
                                "scope": [
                                    "request"
                                ],
                                "name": "marketingCookies",
                                "value": "yes",
                                "modifier": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "Accepts-Marketing-Cookies",
                                        "value": "true"
                                    }
                                },
                                "else": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "Accepts-Marketing-Cookies",
                                        "value": "false"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/url.Filter",
            "input_query_strings": [
                "legacy"
            ],
            "backend": [
                {
                    "url_pattern": "/__echo/url.Filter",
                    "allow": [
                        "req_headers"
                    ],
                    "extra_config": {
                        "modifier/martian": {
                            "url.Filter": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "query": "legacy=1",
                                "host": "localhost:8080",
                                "modifier": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "X-Legacy",
                                        "value": "true"
                                    }
                                },
                                "else": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "X-Legacy",
                                        "value": "false"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/querystring.Filter",
            "input_query_strings": [
                "param"
            ],
            "backend": [
                {
                    "url_pattern": "/__echo/querystring.Filter",
                    "allow": [
                        "req_headers"
                    ],
                    "extra_config": {
                        "modifier/martian": {
                            "querystring.Filter": {
                                "scope": [
                                    "request"
                                ],
                                "name": "param",
                                "value": "true",
                                "modifier": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "X-Passed-Param",
                                        "value": "true"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.Filter",
            "input_headers": [
                "X-Tenant"
            ],
            "backend": [
                {
                    "url_pattern": "/__echo/header.Filter",
                    "allow": [
                        "req_uri"
                    ],
                    "extra_config": {
                        "modifier/martian": {
                            "header.Filter": {
                                "scope": [
                                    "request"
                                ],
                                "name": "X-Tenant",
                                "value": "v1",
                                "modifier": {
                                    "querystring.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "legacy",
                                        "value": "1"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/header.RegexFilter",
            "input_headers": [
                "X-App-Version"
            ],
            "backend": [
                {
                    "url_pattern": "/__echo/header.RegexFilter",
                    "allow": [
                        "req_uri"
                    ],
                    "extra_config": {
                        "modifier/martian": {
                            "header.RegexFilter": {
                                "scope": [
                                    "request"
                                ],
                                "header": "X-App-Version",
                                "regex": ".*-(alpha|beta|preview)$",
                                "modifier": {
                                    "querystring.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "testing",
                                        "value": "1"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/url.RegexFilter",
            "output_encoding": "no-op",
            "backend": [
                {
                    "url_pattern": "/__echo/url.RegexFilter",
                    "encoding": "no-op",
                    "extra_config": {
                        "modifier/martian": {
                            "url.RegexFilter": {
                                "scope": [
                                    "request"
                                ],
                                "regex": ".*localhost.*",
                                "modifier": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "Is-Localhost",
                                        "value": "true"
                                    }
                                },
                                "else": {
                                    "header.Modifier": {
                                        "scope": [
                                            "request"
                                        ],
                                        "name": "Is-Localhost",
                                        "value": "false"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/fifo.Group",
            "output_encoding": "no-op",
            "backend": [
                {
                    "url_pattern": "/__echo/fifo.Group",
                    "extra_config": {
                        "modifier/martian": {
                            "fifo.Group": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "aggregateErrors": true,
                                "modifiers": [
                                    {
                                        "body.Modifier": {
                                            "scope": [
                                                "request"
                                            ],
                                            "body": "eyJtc2ciOiJ5b3Ugcm9jayEifQ=="
                                        }
                                    },
                                    {
                                        "header.Modifier": {
                                            "scope": [
                                                "request",
                                                "response"
                                            ],
                                            "name": "X-Martian",
                                            "value": "true"
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            ]
        },
        {
            "endpoint": "/test/priority.Group",
            "output_encoding": "no-op",
            "backend": [
                {
                    "url_pattern": "/__echo/priority.Group",
                    "extra_config": {
                        "modifier/martian": {
                            "priority.Group": {
                                "scope": [
                                    "request",
                                    "response"
                                ],
                                "modifiers": [
                                    {
                                        "priority": 0,
                                        "modifier": {
                                            "querystring.Modifier": {
                                                "scope": [
                                                    "request"
                                                ],
                                                "name": "first",
                                                "value": "0"
                                            }
                                        }
                                    },
                                    {
                                        "priority": 100,
                                        "modifier": {
                                            "querystring.Modifier": {
                                                "scope": [
                                                    "request"
                                                ],
                                                "name": "last",
                                                "value": "100"
                                            }
                                        }
                                    }
                                ]
                            }
                        }
                    }
                }
            ]
        }
    ],
    "extra_config": {
        "telemetry/opentelemetry": {
            "service_name": "krakend_middle_service",
            "metric_reporting_period": 0,
            "trace_sample_rate": 0.25,
            "exporters": {
                "prometheus": [
                    {
                        "name": "remote_prometheus",
                        "port": 9092,
                        "listen_ip": "::1",
                        "process_metrics": false,
                        "go_metrics": false,
                        "disable_metrics": false
                    },
                    {
                        "name": "local_prometheus",
                        "port": 9093,
                        "process_metrics": true,
                        "go_metrics": true
                    }
                ],
                "otlp": [
                    {
                        "name": "local_tempo",
                        "host": "localhost",
                        "port": 4317,
                        "use_http": false,
                        "disable_metrics": false,
                        "disable_traces": false
                    }
                ]
            },
            "layers": {
                "global": {
                    "disable_metrics": false,
                    "disable_traces": false,
                    "disable_propagation": false,
                    "report_headers": true
                },
                "proxy": {
                    "disable_metrics": false,
                    "disable_traces": false,
                    "report_headers": true
                },
                "backend": {
                    "metrics": {
                        "disable_stage": false,
                        "round_trip": true,
                        "read_payload": true,
                        "detailed_connection": true,
                        "static_attributes": [
                            {
                                "key": "my_metric_attr",
                                "value": "my_metric_val"
                            }
                        ]
                    },
                    "traces": {
                        "disable_stage": false,
                        "round_trip": true,
                        "read_payload": true,
                        "detailed_connection": true,
                        "static_attributes": [
                            {
                                "key": "my_trace_attr",
                                "value": "my_trace_val"
                            }
                        ],
                        "report_headers": true
                    }
                }
            },
            "skip_paths": [
                "/foo/{bar}"
            ]
        },
        "telemetry/opentelemetry-security": {
            "otlp": [
                {
                    "name": "newrelic",
                    "headers": {
                        "api-key": "YOUR_NEWRELIC_LICENSE_KEY"
                    }
                }
            ]
        },
        "server/virtualhost": {
            "aliased_hosts": {
                "user_api": "users.svc.example.com:9000"
            }
        },
        "server/static-filesystem": {
            "prefix": "/media/assets",
            "path": "./../../",
            "@comment": "static om",
            "skip": [
                "/media/ignore/this/directory",
                "/media/file.json"
            ]
        },
        "grpc": {
            "catalog": [
                "./grpc/definitions"
            ],
            "server": {
                "services": [
                    {
                        "name": "flight_finder.Flights",
                        "methods": [
                            {
                                "name": "FindFlight",
                                "input_headers": [
                                    "*"
                                ],
                                "payload_params": {
                                    "page.cursor": "cursor"
                                },
                                "backend": [
                                    {
                                        "host": [
                                            "http://localhost:8080"
                                        ],
                                        "url_pattern": "/__debug/foo/"
                                    },
                                    {
                                        "host": [
                                            "localhost:4242"
                                        ],
                                        "url_pattern": "/flight_finder.Flights/FindFlight",
                                        "extra_config": {
                                            "backend/grpc": {
                                                "use_request_body": true
                                            }
                                        }
                                    },
                                    {
                                        "method": "GET",
                                        "host": [
                                            "http://localhost:8000"
                                        ],
                                        "url_pattern": "/articles.json?q={cursor}"
                                    }
                                ]
                            }
                        ]
                    }
                ],
                "opentelemetry": {
                    "disable_metrics": true,
                    "disable_traces": true
                }
            }
        },
        "auth/validator": {
            "shared_cache_duration": 5,
            "@comment": 1
        },
        "auth/basic": {
            "htpasswd_path": "/path/to/.htpasswd",
            "users": {
                "admin": "$2y$05$HpdPmv2Z3h3skMCVaf/CEep/UUBuhZ...",
                "user2": "$2y$05$HpdPmv2Z3h3skMCVaf/CEep/UUBuhZ..."
            }
        },
        "telemetry/newrelic": {
            "license": "XXXX",
            "debug": true,
            "headers_to_pass": [
                "*"
            ]
        },
        "router": {
            "disable_path_decoding": false,
            "hide_version_header": false,
            "error_body": {
                "404": {
                    "msg": "Unknown endpoint",
                    "status": 404
                },
                "405": {
                    "oh-my-god": "What on earth are you requesting?"
                }
            },
            "app_engine": false,
            "auto_options": false,
            "disable_handle_method_not_allowed": false,
            "disable_access_log": true,
            "disable_health": false,
            "disable_redirect_fixed_path": false,
            "disable_redirect_trailing_slash": false,
            "forwarded_by_client_ip": false,
            "health_path": "/__health",
            "logger_skip_paths": [
                "/__health"
            ],
            "max_multipart_memory": 1000,
            "remote_ip_headers": [],
            "remove_extra_slash": false,
            "return_error_msg": false,
            "trusted_proxies": [],
            "@extra_comment": "here"
        },
        "qos/ratelimit/service": {
            "client_max_rate": 10,
            "key": "X-TOKEN",
            "max_rate": 100,
            "every": "10m",
            "strategy": "header",
            "@extra_comment": "here"
        },
        "security/bot-detector": {
            "allow": [
                "MyAndroidClient/1.0"
            ],
            "cache_size": 100,
            "deny": [
                "facebookexternalhit/1.1"
            ],
            "patterns": [
                "(facebookexternalhit)/.*"
            ],
            "@extra_comment": "here"
        },
        "security/cors": {
            "allow_origins": [
                "*"
            ],
            "allow_methods": [
                "POST",
                "GET"
            ],
            "allow_headers": [
                "Accept-Language"
            ],
            "expose_headers": [
                "Header-1"
            ],
            "max_age": "15h",
            "allow_credentials": true,
            "debug": true,
            "@extra_comment": "here"
        },
        "security/http": {
            "allowed_hosts": [
                "host.known.com:443"
            ],
            "ssl_proxy_headers": {
                "X-Forwarded-Proto": "https"
            },
            "host_proxy_headers": [
                "X-Forwarded-Hosts"
            ],
            "ssl_redirect": true,
            "ssl_host": "ssl.host.domain",
            "sts_seconds": 300,
            "sts_include_subdomains": true,
            "frame_deny": true,
            "referrer_policy": "same-origin",
            "custom_frame_options_value": "ALLOW-FROM https://example.com",
            "hpkp_public_key": "pin-sha256=\"base64==\"; max-age=expireTime [; includeSubDomains][; report-uri=\"reportURI\"]",
            "content_type_nosniff": true,
            "browser_xss_filter": true,
            "content_security_policy": "default-src 'self';",
            "is_development": true,
            "@extra_comment": "here"
        },
        "telemetry/logging": {
            "level": "CRITICAL",
            "prefix": "[KRAKEND]",
            "stdout": true,
            "syslog": false,
            "format": "custom",
            "syslog_facility": "local3",
            "custom_format": "%{message}",
            "@extra_comment": "here"
        },
        "telemetry/logstash": {
            "enabled": false,
            "@extra_comment": "here"
        },
        "telemetry/gelf": {
            "address": "myGraylogInstance:12201",
            "enable_tcp": false,
            "@extra_comment": "here"
        },
        "telemetry/influx": {
            "address": "http://192.168.99.9:8086",
            "ttl": "25s",
            "buffer_size": 0,
            "db": "krakend",
            "username": "your-influxdb-user",
            "password": "your-influxdb-password",
            "@extra_comment": "here"
        },
        "github_com/letgoapp/krakend-influx": {
            "address": "http://192.168.99.9:8086",
            "ttl": "25s",
            "buffer_size": 0,
            "db": "krakend",
            "username": "your-influxdb-user",
            "password": "your-influxdb-password",
            "@extra_comment": "here"
        },
        "telemetry/metrics": {
            "backend_disabled": false,
            "collection_time": "60s",
            "endpoint_disabled": false,
            "listen_address": ":8090",
            "proxy_disabled": false,
            "router_disabled": false,
            "@extra_comment": "here"
        },
        "telemetry/opencensus": {
            "sample_rate": 100,
            "reporting_period": 2,
            "@extra_comment": "here",
            "enabled_layers": {
                "backend": false,
                "pipe": true,
                "router": false,
                "@extra_comment": "here"
            },
            "exporters": {
                "logger": {
                    "spans": false,
                    "stats": false,
                    "@extra_comment": "here"
                },
                "zipkin": {
                    "collector_url": "http://192.168.99.100:9411/api/v2/spans",
                    "service_name": "krakend",
                    "@extra_comment": "here"
                },
                "jaeger": {
                    "endpoint": "http://192.168.99.100:14268/api/traces",
                    "service_name": "krakend",
                    "@extra_comment": "here",
                    "buffer_max_count": 1000
                },
                "influxdb": {
                    "address": "http://192.168.99.100:8086",
                    "db": "krakend",
                    "timeout": "1s",
                    "password": "kr4k3nd",
                    "username": "krakend",
                    "@extra_comment": "here"
                },
                "prometheus": {
                    "namespace": "krakend",
                    "port": 9091,
                    "tag_host": false,
                    "tag_method": false,
                    "tag_path": false,
                    "tag_statuscode": false,
                    "@extra_comment": "here"
                },
                "xray": {
                    "access_key_id": "dasdasdas",
                    "secret_access_key": "dadasdasd",
                    "region": "eu-west-1",
                    "version": "latest",
                    "@extra_comment": "here"
                },
                "stackdriver": {
                    "default_labels": {
                        "env": "production"
                    },
                    "metric_prefix": "krakend",
                    "project_id": "1234",
                    "@extra_comment": "here"
                },
                "datadog": {
                    "disable_count_per_buckets": false,
                    "global_tags": {
                        "env": "prod"
                    },
                    "namespace": "krakend",
                    "service": "gateway",
                    "stats_address": "localhost:8125",
                    "tags": [
                        "A"
                    ],
                    "trace_address": "localhost:8126",
                    "@extra_comment": "here"
                },
                "ocagent": {
                    "address": "localhost:55678",
                    "enable_compression": false,
                    "headers": {
                        "header1": "value1"
                    },
                    "insecure": true,
                    "reconnection": "2s",
                    "service_name": "krakend",
                    "@extra_comment": "here"
                }
            }
        },
        "auth/revoker": {
            "hash_name": "default",
            "N": 10000000,
            "P": 1e-7,
            "port": 1234,
            "token_keys": [
                "jti"
            ],
            "TTL": 1500,
            "@extra_comment": "here",
            "revoke_server_ping_url": "http://localhost:8081/instances",
            "revoke_server_ping_interval": "30s",
            "revoke_server_api_key": "639ee23f-f4c5-40c4-855c-912bf01fae87",
            "revoke_server_max_workers": 5
        },
        "documentation/openapi": {
            "description": "This is a sample server. You can find out more about at [http://blah](http://blah.blah.com)",
            "version": "1.0.0",
            "host": "my.api.com",
            "base_path": "/v1",
            "terms_of_service": "http://url.to/tos",
            "contact_name": "The wonderful API department",
            "contact_email": "contact@example.com",
            "contact_url": "https://your.company/developers",
            "license_name": "MIT",
            "license_url": "https://opensource.org/licenses/MIT",
            "tag_definition": [
                {
                    "name": "Tag1",
                    "description": "Description of tag1"
                }
            ],
            "schemes": [
                "http",
                "https"
            ],
            "components_schemas": {
                "Pet": "ewogICAgICAgICJ0eXBlIjogIm9iamVjdCIsCiAgICAgICAgInJlcXVpcmVkIjogWwogICAgICAgICAgImlkIiwKICAgICAgICAgICJuYW1lIgogICAgICAgIF0sCiAgICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgICAiaWQiOiB7CiAgICAgICAgICAgICJ0eXBlIjogImludGVnZXIiLAogICAgICAgICAgICAiZm9ybWF0IjogImludDY0IgogICAgICAgICAgfSwKICAgICAgICAgICJuYW1lIjogewogICAgICAgICAgICAidHlwZSI6ICJzdHJpbmciCiAgICAgICAgICB9LAogICAgICAgICAgInRhZyI6IHsKICAgICAgICAgICAgInR5cGUiOiAic3RyaW5nIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQ==",
                "Pot": {
                    "type": "object",
                    "required": [
                        "id",
                        "name"
                    ],
                    "properties": {
                        "id": {
                            "type": "integer",
                            "format": "int64"
                        },
                        "name": {
                            "type": "string"
                        },
                        "tag": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "auth/api-keys": {
            "strategy": "header",
            "identifier": "Authorization",
            "hash": "plain",
            "salt": "mySalt",
            "propagate_role": "X-Role",
            "keys": [
                {
                    "key": "4d2c61e1-34c4-e96c-9456-15bd983c5019",
                    "roles": [
                        "role1",
                        "role2"
                    ],
                    "@description": "ACME Inc."
                },
                {
                    "key": "58427514-be32-0b52-b7c6-d01fada30497",
                    "roles": [
                        "role1",
                        "role3"
                    ],
                    "@description": "Administrators Inc."
                }
            ]
        },
        "plugin/http-server": {
            "name": [
                "a-plugin"
            ],
            "a_plugin_conf": {},
            "ip-filter": {
                "allow": false,
                "CIDR": [
                    "192.168.0.0/24",
                    "172.17.2.56/32"
                ],
                "client_ip_headers": [
                    "X-Forwarded-For",
                    "X-Real-IP",
                    "X-Appengine-Remote-Addr"
                ],
                "trusted_proxies": [
                    "10.0.0.0/16"
                ]
            },
            "jwk-aggregator": {
                "origins": [
                    "https://jwk1.tld/jwk.json",
                    "http://foo.bar/public_keys"
                ],
                "port": 9876
            },
            "url-rewrite": {
                "literal": {
                    "/hi-there": "/hello",
                    "/whatsup": "/hello"
                },
                "regexp": [
                    [
                        "/hi-there/([.+)/bar",
                        "/hello/${1}"
                    ]
                ]
            },
            "geoip": {
                "citydb_path": "path/to/GeoIP2-City.mmdb"
            },
            "redis-ratelimit": {
                "burst": 0,
                "host": "redis",
                "period": "3s",
                "rate": 0,
                "tokenizer": "cookie",
                "tokenizer_field": "aaa"
            },
            "wildcard": {
                "endpoints": {
                    "/__wildcard/foo": [
                        "/foo",
                        "/aliasfoo"
                    ]
                }
            }
        },
        "modifier/lua-endpoint": {
            "pre": "print('Lua service!'); local c = ctx.load(); c:headers('X-from-lua', '1234');"
        }
    }
}