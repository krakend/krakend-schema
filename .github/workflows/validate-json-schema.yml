on: [push]
name: Validate JSON schema
jobs:
  validate_configurations:
    name: Validate all json files using their own $schema properties
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: intelligence-ai/jsonschema@v0.6.0
      - run: jsonschema fmt --ignore test --check --verbose
      - run: jsonschema lint --ignore test --verbose
      - run: jsonschema test ./test/v2.6 --resolve v2.6

      - name: Validate components
        uses: cardinalby/schema-validator-action@v1
        with:
          file: '**/*.json'
      - name: Validate root documents
        uses: cardinalby/schema-validator-action@v1
        with:
          file: '*.json'
